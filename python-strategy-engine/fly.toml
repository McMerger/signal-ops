# Fly.io configuration for Python Strategy Engine
# Deploy with: fly deploy --config python-strategy-engine/fly.toml

app = "signalops-strategy"
primary_region = "iad"

[build]
  dockerfile = "python-strategy-engine/Dockerfile"

[env]
  PYTHONUNBUFFERED = "1"
  GRPC_PORT = "50051"

# gRPC service (internal, not exposed to public)
[[services]]
  internal_port = 50051
  protocol = "tcp"

  [[services.ports]]
    port = 50051

# Optional REST API for health checks
[[services]]
  internal_port = 5000
  protocol = "tcp"

  [[services.ports]]
    port = 5000

[[vm]]
  size = "shared-cpu-1x"
  memory = "512mb"
